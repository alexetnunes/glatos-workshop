<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Residence Index</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.8.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-1.39.2/plotly-latest.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 64px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 69px;
  margin-top: -69px;
}

.section h2 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h3 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h4 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h5 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h6 {
  padding-top: 69px;
  margin-top: -69px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">GLATOS Workshop 2019</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="residence_index.html">Residence Index</a>
</li>
<li>
  <a href="receiver_efficiency.html">Receiver Efficiency Index</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Residence Index</h1>

</div>


<p>This residence index tool will take a detection event dataframe and caculate the residency index for each station/receiver in the detections. The information passed to the function is what is used to calculate the residence index, make sure you are only passing the data you want taken into consideration for the residence index (i.e.Â species, stations, tags, etc.).</p>
<div id="importing-libraries" class="section level2">
<h2>Importing Libraries</h2>
<p>We will import <code>glatos</code> and <code>plotly</code> to run then visualize the RI.</p>
<pre class="r"><code>library(glatos)
library(plotly)</code></pre>
</div>
<div id="importing-and-compressing-data" class="section level2">
<h2>Importing and Compressing Data</h2>
<p>We will import the sample data below using <code>glatos::read_glatos_detections()</code>. We will then compress the detections into detection events with <code>glatos::detection_events()</code>, using <code>station</code> as our location column.</p>
<pre class="r"><code>det_file &lt;- system.file(&quot;extdata&quot;, &quot;walleye_detections.csv&quot;,
                        package = &quot;glatos&quot;)

detections &lt;- read_glatos_detections(det_file)
detection_events &lt;- glatos::detection_events(detections, location_col = &#39;station&#39;)</code></pre>
</div>
<div id="kessel-method" class="section level2">
<h2>Kessel Method</h2>
<p>The Kessel method converts both the startdate and enddate columns into a date with no hours, minutes, or seconds. Next it creates a list of the unique days where a detection was seen. The size of the list is returned as the total number of days as an integer. This calculation is used to determine the total number of distinct days (T) and the total number of distinct days per station (S). Possible rounding error may occur as a detection on <code>2016-01-01 23:59:59</code> and a detection on <code>2016-01-02 00:00:01</code> would be counted as two days when it is really 2-3 seconds.</p>
<blockquote>
<p><span class="math inline">\(RI = \frac{S}{T}\)</span></p>
<p><span class="math inline">\(RI = Residence Index\)</span></p>
<p><span class="math inline">\(S\)</span> = Distinct number of days detected at the station</p>
<p><span class="math inline">\(T\)</span> = Distinct number of days detected anywhere on the array</p>
</blockquote>
<pre class="r"><code>ri &lt;- glatos::residence_index(detection_events,calculation_method = &#39;kessel&#39;)</code></pre>
<div id="plotting-with-plotly" class="section level3">
<h3>Plotting with Plotly</h3>
<p>Below is the code for plotting the RI using <code>plotly</code>. <code>plotly</code> allows us to interact with the map rather than haveing a static image. More about <code>plotly</code> can be found <a href="https://plot.ly/r/">here</a>.</p>
<pre class="r"><code>geo &lt;- list(
    scope = &#39;north america&#39;,
  showland = TRUE,
  landcolor = toRGB(&quot;white&quot;),
  showocean = TRUE,
  oceancolor = toRGB(&quot;gray&quot;),
  showcountries = TRUE,
  showlakes = TRUE,
  lakecolor = plotly::toRGB(&quot;gray&quot;),
  
  resolution = 50,
  center = list(lat = median(ri$mean_latitude),
                lon = median(ri$mean_longitude)),
  lonaxis = list(range=c(min(ri$mean_longitude)-1, max(ri$mean_longitude)+1)),
  lataxis = list(range=c(min(ri$mean_latitude)-1, max(ri$mean_latitude)+1))
)


map &lt;- ri %&gt;% 
  plot_geo(lat = ~mean_latitude, lon = ~mean_longitude, color = ~residency_index )%&gt;%
  add_markers(
            text = ~paste(location, &#39;: &#39;, residency_index),
            hoverinfo = &quot;text&quot;,
    size = ~c(residency_index * 5)
  )%&gt;%
  layout(title = &quot;Kessel RI&quot;,geo = geo)</code></pre>
<p>To show the map you can just type out the variable name.</p>
<pre class="r"><code>map</code></pre>
<div id="htmlwidget-86b256232b71fae402f0" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-86b256232b71fae402f0">{"x":{"visdat":{"73418a118d7":["function () ","plotlyVisDat"]},"cur_data":"73418a118d7","attrs":{"73418a118d7":{"lat":{},"lon":{},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"markers","text":{},"hoverinfo":"text","size":{},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","title":"Kessel RI","geo":{"domain":{"x":[0,1],"y":[0,1]},"scope":"north america","showland":true,"landcolor":"rgba(255,255,255,1)","showocean":true,"oceancolor":"rgba(190,190,190,1)","showcountries":true,"showlakes":true,"lakecolor":"rgba(190,190,190,1)","resolution":50,"center":{"lat":44.14295,"lon":-83.375645},"lonaxis":{"range":[-84.99264,-81.47034]},"lataxis":{"range":[40.57098,46.50756]}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"lat":[43.39165,43.38709,43.387,43.60963,43.61235,43.61235,44.17255,44.17873,44.17873,44.17714,44.17712,44.24644,44.24643,44.24651,44.2418,44.24179,44.23708,44.23707,44.23235,44.23231,44.22292,44.22293,44.45198,44.90447,44.91327,44.92215,44.9308,44.93957,44.94818,44.96585,44.95714,44.97452,45.00077,45.0095,45.01824,45.33986,45.33385,45.34603,45.48983,45.49914,45.50756,44.71315,44.22771,44.21828,44.21342,44.2041,44.2088,44.19472,44.10408,44.09961,44.10875,44.09214,43.37698,44.12241,44.12695,44.11781,44.13613,44.13149,44.11329,44.14066,44.14524,44.14975,44.15439,44.45144,44.45157,41.57098,41.57417,41.57612,41.63532,41.6443,41.63288,41.63846,41.64165,41.63648,41.63719,41.62433,42.0769,42.09637,42.12746,42.24937,42.33541,42.33204,42.34447,42.35085,42.35469,42.35693,42.35278,42.55267,42.54992,42.61334,42.61462,42.6352,42.76994,42.77913],"lon":[-83.99264,-83.98737,-83.9873,-83.88658,-83.8608,-83.86096,-83.5309,-83.54767,-83.54779,-83.54169,-83.54173,-83.44582,-83.44582,-83.44588,-83.43513,-83.43507,-83.42447,-83.4245,-83.41382,-83.41389,-83.39236,-83.39233,-83.31861,-83.31385,-83.31073,-83.30769,-83.30461,-83.30165,-83.29828,-83.29228,-83.29516,-83.28925,-83.27969,-83.27665,-83.27346,-83.44852,-83.45837,-83.43862,-83.91048,-83.9059,-83.90137,-83.2011,-83.4031,-83.38175,-83.37122,-83.34985,-83.36047,-83.32868,-83.36923,-83.35869,-83.38007,-83.35204,-83.99115,-83.41245,-83.42327,-83.40174,-83.44487,-83.43403,-83.39079,-83.45551,-83.46626,-83.47694,-83.48782,-83.29315,-83.30572,-83.61776,-83.60687,-83.61071,-83.53083,-83.53426,-82.97516,-82.98027,-82.97328,-82.96842,-82.97453,-83.01284,-83.12096,-83.11681,-83.11873,-83.11824,-83.00901,-83.00352,-82.93849,-82.93774,-82.94291,-82.93016,-82.92844,-82.58909,-82.58493,-82.52119,-82.52926,-82.49834,-82.47034,-82.47231],"type":"scattergeo","mode":"markers","text":["TTB-002 :  0.0133333333333333","TTB-001 :  0.04","TTB-001 :  0.04","SGR-002 :  0.0133333333333333","SGR-001 :  0.04","SGR-001 :  0.04","SBI-003 :  0.0133333333333333","SBI-001 :  0.0266666666666667","SBI-001 :  0.0266666666666667","SBI-002 :  0.0266666666666667","SBI-002 :  0.0266666666666667","SBO-001 :  0.04","SBO-001 :  0.04","SBO-001 :  0.04","SBO-002 :  0.0533333333333333","SBO-002 :  0.0533333333333333","SBO-003 :  0.04","SBO-003 :  0.04","SBO-004 :  0.04","SBO-004 :  0.04","SBO-006 :  0.04","SBO-006 :  0.04","OSC-001 :  0.0133333333333333","THB-003 :  0.0133333333333333","THB-004 :  0.0133333333333333","THB-005 :  0.0133333333333333","THB-006 :  0.0266666666666667","THB-007 :  0.0133333333333333","THB-008 :  0.0133333333333333","THB-010 :  0.0133333333333333","THB-009 :  0.0133333333333333","THB-011 :  0.0133333333333333","THB-014 :  0.0133333333333333","THB-015 :  0.0266666666666667","THB-016 :  0.0266666666666667","PRS-002 :  0.16","PRS-001 :  0.0933333333333333","PRS-003 :  0.133333333333333","FMP-001 :  0.12","FMP-002 :  0.133333333333333","FMP-003 :  0.133333333333333","STG-006 :  0.0133333333333333","SBO-005 :  0.0266666666666667","SBO-007 :  0.0133333333333333","SBO-008 :  0.0133333333333333","SBO-010 :  0.0133333333333333","SBO-009 :  0.0133333333333333","SBO-012 :  0.0133333333333333","SBI-018 :  0.0133333333333333","SBI-019 :  0.0133333333333333","SBI-017 :  0.0133333333333333","SBI-020 :  0.0133333333333333","SHR-001 :  0.0133333333333333","SBI-014 :  0.0133333333333333","SBI-013 :  0.0266666666666667","SBI-015 :  0.0266666666666667","SBI-011 :  0.0266666666666667","SBI-012 :  0.0266666666666667","SBI-016 :  0.0133333333333333","SBI-010 :  0.0266666666666667","SBI-009 :  0.0266666666666667","SBI-008 :  0.0133333333333333","SBI-007 :  0.0133333333333333","OSC-003 :  0.0133333333333333","OSC-002 :  0.0133333333333333","MAU-001 :  0.0266666666666667","MAU-002 :  0.04","MAU-003 :  0.0666666666666667","MAU-011 :  0.08","MAU-012 :  0.0666666666666667","RAR-005 :  0.173333333333333","RAR-004 :  0.16","RAR-003 :  0.16","RAR-002 :  0.146666666666667","RAR-001 :  0.173333333333333","TSR-001 :  0.0933333333333333","DRL-010 :  0.0133333333333333","DRL-011 :  0.0133333333333333","DRL-004 :  0.0133333333333333","DRF-004 :  0.0133333333333333","DRU-007 :  0.0133333333333333","DRU-008 :  0.0133333333333333","DRU-006 :  0.0133333333333333","DRU-005 :  0.0133333333333333","DRU-004 :  0.0133333333333333","DRU-001 :  0.0133333333333333","DRU-002 :  0.0133333333333333","SCL-004 :  0.0133333333333333","SCL-005 :  0.0133333333333333","SCL-001 :  0.0133333333333333","SCL-002 :  0.0133333333333333","SCM-003 :  0.0133333333333333","SCM-002 :  0.0133333333333333","SCM-001 :  0.0133333333333333"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"marker":{"colorbar":{"title":"residency_index","ticklen":2},"cmin":0.0133333333333333,"cmax":0.173333333333333,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.25","rgba(60,82,138,1)"],["0.447916666666667","rgba(38,131,142,1)"],["0.75","rgba(98,199,98,1)"],["0.916666666666667","rgba(199,225,42,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0.0133333333333333,0.04,0.04,0.0133333333333333,0.04,0.04,0.0133333333333333,0.0266666666666667,0.0266666666666667,0.0266666666666667,0.0266666666666667,0.04,0.04,0.04,0.0533333333333333,0.0533333333333333,0.04,0.04,0.04,0.04,0.04,0.04,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0266666666666667,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0266666666666667,0.0266666666666667,0.16,0.0933333333333333,0.133333333333333,0.12,0.133333333333333,0.133333333333333,0.0133333333333333,0.0266666666666667,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0266666666666667,0.0266666666666667,0.0266666666666667,0.0266666666666667,0.0133333333333333,0.0266666666666667,0.0266666666666667,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0266666666666667,0.04,0.0666666666666667,0.08,0.0666666666666667,0.173333333333333,0.16,0.16,0.146666666666667,0.173333333333333,0.0933333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333],"size":[10,25,25,10,25,25,10,17.5,17.5,17.5,17.5,25,25,25,32.5,32.5,25,25,25,25,25,25,10,10,10,10,17.5,10,10,10,10,10,10,17.5,17.5,92.5,55,77.5,70,77.5,77.5,10,17.5,10,10,10,10,10,10,10,10,10,10,10,17.5,17.5,17.5,17.5,10,17.5,17.5,10,10,10,10,17.5,25,40,47.5,40,100,92.5,92.5,85,100,55,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10],"sizemode":"area","line":{"colorbar":{"title":"","ticklen":2},"cmin":0.0133333333333333,"cmax":0.173333333333333,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.25","rgba(60,82,138,1)"],["0.447916666666667","rgba(38,131,142,1)"],["0.75","rgba(98,199,98,1)"],["0.916666666666667","rgba(199,225,42,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0.0133333333333333,0.04,0.04,0.0133333333333333,0.04,0.04,0.0133333333333333,0.0266666666666667,0.0266666666666667,0.0266666666666667,0.0266666666666667,0.04,0.04,0.04,0.0533333333333333,0.0533333333333333,0.04,0.04,0.04,0.04,0.04,0.04,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0266666666666667,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0266666666666667,0.0266666666666667,0.16,0.0933333333333333,0.133333333333333,0.12,0.133333333333333,0.133333333333333,0.0133333333333333,0.0266666666666667,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0266666666666667,0.0266666666666667,0.0266666666666667,0.0266666666666667,0.0133333333333333,0.0266666666666667,0.0266666666666667,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0266666666666667,0.04,0.0666666666666667,0.08,0.0666666666666667,0.173333333333333,0.16,0.16,0.146666666666667,0.173333333333333,0.0933333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333,0.0133333333333333]}},"textfont":{"size":[10,25,25,10,25,25,10,17.5,17.5,17.5,17.5,25,25,25,32.5,32.5,25,25,25,25,25,25,10,10,10,10,17.5,10,10,10,10,10,10,17.5,17.5,92.5,55,77.5,70,77.5,77.5,10,17.5,10,10,10,10,10,10,10,10,10,10,10,17.5,17.5,17.5,17.5,10,17.5,17.5,10,10,10,10,17.5,25,40,47.5,40,100,92.5,92.5,85,100,55,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10]},"geo":"geo","frame":null},{"type":"scattergeo","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"colorbar":{"title":"residency_index","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"cmin":0.0133333333333333,"cmax":0.173333333333333,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.0833333333333333","rgba(72,32,111,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.166666666666667","rgba(68,58,128,1)"],["0.25","rgba(60,82,138,1)"],["0.447916666666667","rgba(38,131,142,1)"],["0.75","rgba(98,199,98,1)"],["0.916666666666667","rgba(199,225,42,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"color":[0.0133333333333333,0.173333333333333],"line":{"color":"rgba(255,127,14,1)"}},"lat":[-83.99264,-82.47034],"lon":[41.57098,45.50756],"geo":"geo","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>

</div>
</div>
<div id="timedelta-method" class="section level2">
<h2>Timedelta Method</h2>
<p>The Timedelta calculation method determines the first startdate of all detections and the last enddate of all detections. The time difference is then taken as the values to be used in calculating the residence index. The timedelta for each station is divided by the timedelta of the array to determine the residence index.</p>
<blockquote>
<p><span class="math inline">\(RI = \frac{\Delta S}{\Delta T}\)</span></p>
<p><span class="math inline">\(RI\)</span> = Residence Index</p>
<p><span class="math inline">\(\Delta S\)</span> = Last detection time at a station - First detection time at the station</p>
<p><span class="math inline">\(\Delta T\)</span> = Last detection time on an array - First detection time on the array</p>
</blockquote>
<pre class="r"><code>ri &lt;- glatos::residence_index(detection_events,calculation_method = &#39;timedelta&#39;)

geo &lt;- list(
    scope = &#39;north america&#39;,
  showland = TRUE,
  landcolor = toRGB(&quot;white&quot;),
  showocean = TRUE,
  oceancolor = toRGB(&quot;gray&quot;),
  showcountries = TRUE,
  showlakes = TRUE,
  lakecolor = plotly::toRGB(&quot;gray&quot;),
  
  resolution = 50,
  center = list(lat = median(ri$mean_latitude),
                lon = median(ri$mean_longitude)),
  lonaxis = list(range=c(min(ri$mean_longitude)-1, max(ri$mean_longitude)+1)),
  lataxis = list(range=c(min(ri$mean_latitude)-1, max(ri$mean_latitude)+1))
)


map &lt;- ri %&gt;% 
  plot_geo(lat = ~mean_latitude, lon = ~mean_longitude, color = ~residency_index )%&gt;%
  add_markers(
            text = ~paste(location, &#39;: &#39;, residency_index),
            hoverinfo = &quot;text&quot;,
    size = ~c(residency_index * 5)
  )%&gt;%
  layout(title = &quot;Timedelta RI&quot;,geo = geo)</code></pre>
<p>To show the map you can just type out the variable name.</p>
<pre class="r"><code>map</code></pre>
<div id="htmlwidget-8e1aa036c3d05fdd580a" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-8e1aa036c3d05fdd580a">{"x":{"visdat":{"7342b0fd659":["function () ","plotlyVisDat"]},"cur_data":"7342b0fd659","attrs":{"7342b0fd659":{"lat":{},"lon":{},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"markers","text":{},"hoverinfo":"text","size":{},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","title":"Timedelta RI","geo":{"domain":{"x":[0,1],"y":[0,1]},"scope":"north america","showland":true,"landcolor":"rgba(255,255,255,1)","showocean":true,"oceancolor":"rgba(190,190,190,1)","showcountries":true,"showlakes":true,"lakecolor":"rgba(190,190,190,1)","resolution":50,"center":{"lat":44.14295,"lon":-83.375645},"lonaxis":{"range":[-84.99264,-81.47034]},"lataxis":{"range":[40.57098,46.50756]}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"lat":[43.39165,43.38709,43.387,43.60963,43.61235,43.61235,44.17255,44.17873,44.17873,44.17714,44.17712,44.24644,44.24643,44.24651,44.2418,44.24179,44.23708,44.23707,44.23235,44.23231,44.22292,44.22293,44.45198,44.90447,44.91327,44.92215,44.9308,44.93957,44.94818,44.96585,44.95714,44.97452,45.00077,45.0095,45.01824,45.33986,45.33385,45.34603,45.48983,45.49914,45.50756,44.71315,44.22771,44.21828,44.21342,44.2041,44.2088,44.19472,44.10408,44.09961,44.10875,44.09214,43.37698,44.12241,44.12695,44.11781,44.13613,44.13149,44.11329,44.14066,44.14524,44.14975,44.15439,44.45144,44.45157,41.57098,41.57417,41.57612,41.63532,41.6443,41.63288,41.63846,41.64165,41.63648,41.63719,41.62433,42.0769,42.09637,42.12746,42.24937,42.33541,42.33204,42.34447,42.35085,42.35469,42.35693,42.35278,42.55267,42.54992,42.61334,42.61462,42.6352,42.76994,42.77913],"lon":[-83.99264,-83.98737,-83.9873,-83.88658,-83.8608,-83.86096,-83.5309,-83.54767,-83.54779,-83.54169,-83.54173,-83.44582,-83.44582,-83.44588,-83.43513,-83.43507,-83.42447,-83.4245,-83.41382,-83.41389,-83.39236,-83.39233,-83.31861,-83.31385,-83.31073,-83.30769,-83.30461,-83.30165,-83.29828,-83.29228,-83.29516,-83.28925,-83.27969,-83.27665,-83.27346,-83.44852,-83.45837,-83.43862,-83.91048,-83.9059,-83.90137,-83.2011,-83.4031,-83.38175,-83.37122,-83.34985,-83.36047,-83.32868,-83.36923,-83.35869,-83.38007,-83.35204,-83.99115,-83.41245,-83.42327,-83.40174,-83.44487,-83.43403,-83.39079,-83.45551,-83.46626,-83.47694,-83.48782,-83.29315,-83.30572,-83.61776,-83.60687,-83.61071,-83.53083,-83.53426,-82.97516,-82.98027,-82.97328,-82.96842,-82.97453,-83.01284,-83.12096,-83.11681,-83.11873,-83.11824,-83.00901,-83.00352,-82.93849,-82.93774,-82.94291,-82.93016,-82.92844,-82.58909,-82.58493,-82.52119,-82.52926,-82.49834,-82.47034,-82.47231],"type":"scattergeo","mode":"markers","text":["TTB-002 :  4.91509813207552e-05","TTB-001 :  0.823853490255712","TTB-001 :  0.823853490255712","SGR-002 :  0.000245357841549829","SGR-001 :  0.864527784995853","SGR-001 :  0.864527784995853","SBI-003 :  0.00046947270271348","SBI-001 :  0.856860487165921","SBI-001 :  0.856860487165921","SBI-002 :  0.856854446104743","SBI-002 :  0.856854446104743","SBO-001 :  0.856835273534996","SBO-001 :  0.856835273534996","SBO-001 :  0.856835273534996","SBO-002 :  0.856826708274546","SBO-002 :  0.856826708274546","SBO-003 :  0.856769247288882","SBO-003 :  0.856769247288882","SBO-004 :  0.856645362992051","SBO-004 :  0.856645362992051","SBO-006 :  0.856016355223019","SBO-006 :  0.856016355223019","OSC-001 :  0","THB-003 :  0","THB-004 :  0","THB-005 :  7.34286731906724e-05","THB-006 :  0.000731592361897796","THB-007 :  0.000121785524403533","THB-008 :  0.00114232779841665","THB-010 :  0.00111266136652888","THB-009 :  0.000992804443815947","THB-011 :  6.40692826333445e-05","THB-014 :  3.5565684117846e-05","THB-015 :  0.007957495660788","THB-016 :  0.00787425380840692","PRS-002 :  0.207423806194135","PRS-001 :  0.206028519594565","PRS-003 :  0.183509485572159","FMP-001 :  0.0846900620799867","FMP-002 :  0.0850183214324428","FMP-003 :  0.084959924507723","STG-006 :  0","SBO-005 :  0.463418623474157","SBO-007 :  7.33435878219694e-05","SBO-008 :  6.70472705379488e-05","SBO-010 :  5.47666156551519e-05","SBO-009 :  2.9638070098205e-05","SBO-012 :  0","SBI-018 :  0.000152104277451362","SBI-019 :  0.000179218148278045","SBI-017 :  6.74726973814637e-05","SBI-020 :  0.000105874560456076","SHR-001 :  0","SBI-014 :  0.000120282349556447","SBI-013 :  0.000309313677024903","SBI-015 :  0.000289545509696244","SBI-011 :  0.000333506283526117","SBI-012 :  0.00030971074207885","SBI-016 :  0","SBI-010 :  0.000187216172936125","SBI-009 :  0.000167618176344872","SBI-008 :  0.000146800622802209","SBI-007 :  8.7070693972717e-06","OSC-003 :  0.00011285156068972","OSC-002 :  7.63499375161414e-05","MAU-001 :  0.0243069045131719","MAU-002 :  0.0263405866341209","MAU-003 :  0.0263223500034289","MAU-011 :  0.0272236025905205","MAU-012 :  0.0261752090391519","RAR-005 :  0.0609689419685453","RAR-004 :  0.0590148997527022","RAR-003 :  0.0507641999113637","RAR-002 :  0.0582880438096622","RAR-001 :  0.0585226241711763","TSR-001 :  0.0342345235244878","DRL-010 :  0.000425823908568851","DRL-011 :  6.7784677066708e-06","DRL-004 :  0","DRF-004 :  0","DRU-007 :  0.000412522229261618","DRU-008 :  0.000291956261809495","DRU-006 :  0","DRU-005 :  4.44145624629559e-05","DRU-004 :  2.30581349185078e-05","DRU-001 :  0.000149920419654652","DRU-002 :  2.14415129131512e-05","SCL-004 :  0.000136391846030878","SCL-005 :  5.35470587037426e-05","SCL-001 :  0.000115177227434268","SCL-002 :  0","SCM-003 :  0","SCM-002 :  0","SCM-001 :  0"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"marker":{"colorbar":{"title":"residency_index","ticklen":2},"cmin":0,"cmax":0.864527784995853,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["1.74364449782071e-05","rgba(68,1,84,1)"],["4.49771703953375e-05","rgba(68,1,84,1)"],["6.6038690011535e-05","rgba(68,1,84,1)"],["8.48488906500664e-05","rgba(68,1,84,1)"],["0.000130535493072974","rgba(68,1,84,1)"],["0.000155652667459503","rgba(68,1,84,1)"],["0.000189397847545501","rgba(68,1,84,1)"],["0.000315750562190025","rgba(68,1,84,1)"],["0.000372004831289518","rgba(68,1,84,1)"],["0.000656737220898368","rgba(68,1,84,1)"],["0.00326803759225358","rgba(68,2,85,1)"],["0.0302981605846389","rgba(70,14,94,1)"],["0.0395991015195099","rgba(70,18,97,1)"],["0.0681914061388949","rgba(71,27,106,1)"],["0.0983238753878461","rgba(72,36,116,1)"],["0.424995672054555","rgba(41,125,142,1)"],["0.990154822180903","rgba(247,230,38,1)"],["0.991025693052759","rgba(247,230,38,1)"],["0.991102065665947","rgba(247,230,38,1)"],["0.991125116055698","rgba(247,230,38,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[4.91509813207552e-05,0.823853490255712,0.823853490255712,0.000245357841549829,0.864527784995853,0.864527784995853,0.00046947270271348,0.856860487165921,0.856860487165921,0.856854446104743,0.856854446104743,0.856835273534996,0.856835273534996,0.856835273534996,0.856826708274546,0.856826708274546,0.856769247288882,0.856769247288882,0.856645362992051,0.856645362992051,0.856016355223019,0.856016355223019,0,0,0,7.34286731906724e-05,0.000731592361897796,0.000121785524403533,0.00114232779841665,0.00111266136652888,0.000992804443815947,6.40692826333445e-05,3.5565684117846e-05,0.007957495660788,0.00787425380840692,0.207423806194135,0.206028519594565,0.183509485572159,0.0846900620799867,0.0850183214324428,0.084959924507723,0,0.463418623474157,7.33435878219694e-05,6.70472705379488e-05,5.47666156551519e-05,2.9638070098205e-05,0,0.000152104277451362,0.000179218148278045,6.74726973814637e-05,0.000105874560456076,0,0.000120282349556447,0.000309313677024903,0.000289545509696244,0.000333506283526117,0.00030971074207885,0,0.000187216172936125,0.000167618176344872,0.000146800622802209,8.7070693972717e-06,0.00011285156068972,7.63499375161414e-05,0.0243069045131719,0.0263405866341209,0.0263223500034289,0.0272236025905205,0.0261752090391519,0.0609689419685453,0.0590148997527022,0.0507641999113637,0.0582880438096622,0.0585226241711763,0.0342345235244878,0.000425823908568851,6.7784677066708e-06,0,0,0.000412522229261618,0.000291956261809495,0,4.44145624629559e-05,2.30581349185078e-05,0.000149920419654652,2.14415129131512e-05,0.000136391846030878,5.35470587037426e-05,0.000115177227434268,0,0,0,0],"size":[10.0051167682469,95.7656808836626,95.7656808836626,10.025542505542,100,100,10.0488735515243,99.201810726422,99.201810726422,99.2011818333829,99.2011818333829,99.1991859099352,99.1991859099352,99.1991859099352,99.1982942399926,99.1982942399926,99.1923123747484,99.1923123747484,99.1794156386245,99.1794156386245,99.1139339962813,99.1139339962813,10,10,10,10.0076441506009,10.0761610138084,10.0126782474624,10.1189198353619,10.115831468607,10.1033539945091,10.0066698092728,10.0037024970465,10.8283997598462,10.8197340271256,31.593455851233,31.4482022270687,29.103901561213,18.8164958020816,18.8506686097504,18.8445893103733,10,58.2433032651162,10.0076352929525,10.0069798269681,10.0057013730438,10.0030854142055,10,10.0158345228554,10.0186571601572,10.0070241152103,10.0110218672048,10,10.01252176234,10.032200504617,10.0301425776302,10.0347190293225,10.0322418403097,10,10.0194897791103,10.0174495674203,10.0152823961028,10.00090643269,10.0117481943766,10.0079482631972,12.530423479907,12.7421360402919,12.740237550977,12.8340607157682,12.7249197242804,16.3470542791119,16.1436324776637,15.2847092613046,16.0679645396183,16.0923850763583,13.5639191367559,10.0443295778763,10.0007056593255,10,10,10.0429448321707,10.0303935443359,10,10.004623692484,10.0024004227264,10.0156071765455,10.0022321274061,10.0141988104441,10.0055744134162,10.0119903034338,10,10,10,10],"sizemode":"area","line":{"colorbar":{"title":"","ticklen":2},"cmin":0,"cmax":0.864527784995853,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["1.74364449782071e-05","rgba(68,1,84,1)"],["4.49771703953375e-05","rgba(68,1,84,1)"],["6.6038690011535e-05","rgba(68,1,84,1)"],["8.48488906500664e-05","rgba(68,1,84,1)"],["0.000130535493072974","rgba(68,1,84,1)"],["0.000155652667459503","rgba(68,1,84,1)"],["0.000189397847545501","rgba(68,1,84,1)"],["0.000315750562190025","rgba(68,1,84,1)"],["0.000372004831289518","rgba(68,1,84,1)"],["0.000656737220898368","rgba(68,1,84,1)"],["0.00326803759225358","rgba(68,2,85,1)"],["0.0302981605846389","rgba(70,14,94,1)"],["0.0395991015195099","rgba(70,18,97,1)"],["0.0681914061388949","rgba(71,27,106,1)"],["0.0983238753878461","rgba(72,36,116,1)"],["0.424995672054555","rgba(41,125,142,1)"],["0.990154822180903","rgba(247,230,38,1)"],["0.991025693052759","rgba(247,230,38,1)"],["0.991102065665947","rgba(247,230,38,1)"],["0.991125116055698","rgba(247,230,38,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[4.91509813207552e-05,0.823853490255712,0.823853490255712,0.000245357841549829,0.864527784995853,0.864527784995853,0.00046947270271348,0.856860487165921,0.856860487165921,0.856854446104743,0.856854446104743,0.856835273534996,0.856835273534996,0.856835273534996,0.856826708274546,0.856826708274546,0.856769247288882,0.856769247288882,0.856645362992051,0.856645362992051,0.856016355223019,0.856016355223019,0,0,0,7.34286731906724e-05,0.000731592361897796,0.000121785524403533,0.00114232779841665,0.00111266136652888,0.000992804443815947,6.40692826333445e-05,3.5565684117846e-05,0.007957495660788,0.00787425380840692,0.207423806194135,0.206028519594565,0.183509485572159,0.0846900620799867,0.0850183214324428,0.084959924507723,0,0.463418623474157,7.33435878219694e-05,6.70472705379488e-05,5.47666156551519e-05,2.9638070098205e-05,0,0.000152104277451362,0.000179218148278045,6.74726973814637e-05,0.000105874560456076,0,0.000120282349556447,0.000309313677024903,0.000289545509696244,0.000333506283526117,0.00030971074207885,0,0.000187216172936125,0.000167618176344872,0.000146800622802209,8.7070693972717e-06,0.00011285156068972,7.63499375161414e-05,0.0243069045131719,0.0263405866341209,0.0263223500034289,0.0272236025905205,0.0261752090391519,0.0609689419685453,0.0590148997527022,0.0507641999113637,0.0582880438096622,0.0585226241711763,0.0342345235244878,0.000425823908568851,6.7784677066708e-06,0,0,0.000412522229261618,0.000291956261809495,0,4.44145624629559e-05,2.30581349185078e-05,0.000149920419654652,2.14415129131512e-05,0.000136391846030878,5.35470587037426e-05,0.000115177227434268,0,0,0,0]}},"textfont":{"size":[10.0051167682469,95.7656808836626,95.7656808836626,10.025542505542,100,100,10.0488735515243,99.201810726422,99.201810726422,99.2011818333829,99.2011818333829,99.1991859099352,99.1991859099352,99.1991859099352,99.1982942399926,99.1982942399926,99.1923123747484,99.1923123747484,99.1794156386245,99.1794156386245,99.1139339962813,99.1139339962813,10,10,10,10.0076441506009,10.0761610138084,10.0126782474624,10.1189198353619,10.115831468607,10.1033539945091,10.0066698092728,10.0037024970465,10.8283997598462,10.8197340271256,31.593455851233,31.4482022270687,29.103901561213,18.8164958020816,18.8506686097504,18.8445893103733,10,58.2433032651162,10.0076352929525,10.0069798269681,10.0057013730438,10.0030854142055,10,10.0158345228554,10.0186571601572,10.0070241152103,10.0110218672048,10,10.01252176234,10.032200504617,10.0301425776302,10.0347190293225,10.0322418403097,10,10.0194897791103,10.0174495674203,10.0152823961028,10.00090643269,10.0117481943766,10.0079482631972,12.530423479907,12.7421360402919,12.740237550977,12.8340607157682,12.7249197242804,16.3470542791119,16.1436324776637,15.2847092613046,16.0679645396183,16.0923850763583,13.5639191367559,10.0443295778763,10.0007056593255,10,10,10.0429448321707,10.0303935443359,10,10.004623692484,10.0024004227264,10.0156071765455,10.0022321274061,10.0141988104441,10.0055744134162,10.0119903034338,10,10,10,10]},"geo":"geo","frame":null},{"type":"scattergeo","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"colorbar":{"title":"residency_index","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"cmin":0,"cmax":0.864527784995853,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["1.74364449782071e-05","rgba(68,1,84,1)"],["4.49771703953375e-05","rgba(68,1,84,1)"],["6.6038690011535e-05","rgba(68,1,84,1)"],["8.48488906500664e-05","rgba(68,1,84,1)"],["0.000130535493072974","rgba(68,1,84,1)"],["0.000155652667459503","rgba(68,1,84,1)"],["0.000189397847545501","rgba(68,1,84,1)"],["0.000315750562190025","rgba(68,1,84,1)"],["0.000372004831289518","rgba(68,1,84,1)"],["0.000656737220898368","rgba(68,1,84,1)"],["0.00326803759225358","rgba(68,2,85,1)"],["0.0302981605846389","rgba(70,14,94,1)"],["0.0395991015195099","rgba(70,18,97,1)"],["0.0681914061388949","rgba(71,27,106,1)"],["0.0983238753878461","rgba(72,36,116,1)"],["0.424995672054555","rgba(41,125,142,1)"],["0.990154822180903","rgba(247,230,38,1)"],["0.991025693052759","rgba(247,230,38,1)"],["0.991102065665947","rgba(247,230,38,1)"],["0.991125116055698","rgba(247,230,38,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"color":[0,0.864527784995853],"line":{"color":"rgba(255,127,14,1)"}},"lat":[-83.99264,-82.47034],"lon":[41.57098,45.50756],"geo":"geo","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>

</div>
<div id="aggregate-with-overlap-method" class="section level2">
<h2>Aggregate With Overlap Method</h2>
<p>The Aggregate With Overlap calculation method takes the length of time of each detection and sums them together. A total is returned. The sum for each station is then divided by the sum of the array to determine the residence index.</p>
<blockquote>
<p><span class="math inline">\(RI = \frac{AwOS}{AwOT}\)</span></p>
<p><span class="math inline">\(RI\)</span> = Residence Index</p>
<p><span class="math inline">\(AwOS\)</span> = Sum of length of time of each detection at the station</p>
<p><span class="math inline">\(AwOT\)</span> = Sum of length of time of each detection on the array</p>
</blockquote>
<pre class="r"><code>ri &lt;- glatos::residence_index(detection_events,calculation_method = &#39;aggregate_with_overlap&#39;)

geo &lt;- list(
    scope = &#39;north america&#39;,
  showland = TRUE,
  landcolor = toRGB(&quot;white&quot;),
  showocean = TRUE,
  oceancolor = toRGB(&quot;gray&quot;),
  showcountries = TRUE,
  showlakes = TRUE,
  lakecolor = plotly::toRGB(&quot;gray&quot;),
  
  resolution = 50,
  center = list(lat = median(ri$mean_latitude),
                lon = median(ri$mean_longitude)),
  lonaxis = list(range=c(min(ri$mean_longitude)-1, max(ri$mean_longitude)+1)),
  lataxis = list(range=c(min(ri$mean_latitude)-1, max(ri$mean_latitude)+1))
)


map &lt;- ri %&gt;% 
  plot_geo(lat = ~mean_latitude, lon = ~mean_longitude, color = ~residency_index )%&gt;%
  add_markers(
            text = ~paste(location, &#39;: &#39;, residency_index),
            hoverinfo = &quot;text&quot;,
    size = ~c(residency_index * 5)
  )%&gt;%
  layout(title = &quot;Aggregate With Overlap RI&quot;,geo = geo)
</code></pre>
<p>To show the map you can just type out the variable name.</p>
<pre class="r"><code>map</code></pre>
<div id="htmlwidget-60a450e95016fdb13b35" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-60a450e95016fdb13b35">{"x":{"visdat":{"7346605d5d0":["function () ","plotlyVisDat"]},"cur_data":"7346605d5d0","attrs":{"7346605d5d0":{"lat":{},"lon":{},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"markers","text":{},"hoverinfo":"text","size":{},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","title":"Aggregate With Overlap RI","geo":{"domain":{"x":[0,1],"y":[0,1]},"scope":"north america","showland":true,"landcolor":"rgba(255,255,255,1)","showocean":true,"oceancolor":"rgba(190,190,190,1)","showcountries":true,"showlakes":true,"lakecolor":"rgba(190,190,190,1)","resolution":50,"center":{"lat":44.14295,"lon":-83.375645},"lonaxis":{"range":[-84.99264,-81.47034]},"lataxis":{"range":[40.57098,46.50756]}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"lat":[43.39165,43.38709,43.387,43.60963,43.61235,43.61235,44.17255,44.17873,44.17873,44.17714,44.17712,44.24644,44.24643,44.24651,44.2418,44.24179,44.23708,44.23707,44.23235,44.23231,44.22292,44.22293,44.45198,44.90447,44.91327,44.92215,44.9308,44.93957,44.94818,44.96585,44.95714,44.97452,45.00077,45.0095,45.01824,45.33986,45.33385,45.34603,45.48983,45.49914,45.50756,44.71315,44.22771,44.21828,44.21342,44.2041,44.2088,44.19472,44.10408,44.09961,44.10875,44.09214,43.37698,44.12241,44.12695,44.11781,44.13613,44.13149,44.11329,44.14066,44.14524,44.14975,44.15439,44.45144,44.45157,41.57098,41.57417,41.57612,41.63532,41.6443,41.63288,41.63846,41.64165,41.63648,41.63719,41.62433,42.0769,42.09637,42.12746,42.24937,42.33541,42.33204,42.34447,42.35085,42.35469,42.35693,42.35278,42.55267,42.54992,42.61334,42.61462,42.6352,42.76994,42.77913],"lon":[-83.99264,-83.98737,-83.9873,-83.88658,-83.8608,-83.86096,-83.5309,-83.54767,-83.54779,-83.54169,-83.54173,-83.44582,-83.44582,-83.44588,-83.43513,-83.43507,-83.42447,-83.4245,-83.41382,-83.41389,-83.39236,-83.39233,-83.31861,-83.31385,-83.31073,-83.30769,-83.30461,-83.30165,-83.29828,-83.29228,-83.29516,-83.28925,-83.27969,-83.27665,-83.27346,-83.44852,-83.45837,-83.43862,-83.91048,-83.9059,-83.90137,-83.2011,-83.4031,-83.38175,-83.37122,-83.34985,-83.36047,-83.32868,-83.36923,-83.35869,-83.38007,-83.35204,-83.99115,-83.41245,-83.42327,-83.40174,-83.44487,-83.43403,-83.39079,-83.45551,-83.46626,-83.47694,-83.48782,-83.29315,-83.30572,-83.61776,-83.60687,-83.61071,-83.53083,-83.53426,-82.97516,-82.98027,-82.97328,-82.96842,-82.97453,-83.01284,-83.12096,-83.11681,-83.11873,-83.11824,-83.00901,-83.00352,-82.93849,-82.93774,-82.94291,-82.93016,-82.92844,-82.58909,-82.58493,-82.52119,-82.52926,-82.49834,-82.47034,-82.47231],"type":"scattergeo","mode":"markers","text":["TTB-002 :  8.16591728497404e-07","TTB-001 :  0.199902471727893","TTB-001 :  0.199902471727893","SGR-002 :  4.08295864248702e-07","SGR-001 :  6.8049310708117e-07","SGR-001 :  6.8049310708117e-07","SBI-003 :  5.44394485664936e-07","SBI-001 :  2.72197242832468e-06","SBI-001 :  2.72197242832468e-06","SBI-002 :  2.17757794265975e-06","SBI-002 :  2.17757794265975e-06","SBO-001 :  5.5800434780656e-06","SBO-001 :  5.5800434780656e-06","SBO-001 :  5.5800434780656e-06","SBO-002 :  7.62152279930911e-06","SBO-002 :  7.62152279930911e-06","SBO-003 :  8.84641039205521e-06","SBO-003 :  8.84641039205521e-06","SBO-004 :  7.62152279930911e-06","SBO-004 :  7.62152279930911e-06","SBO-006 :  3.94686002107079e-06","SBO-006 :  3.94686002107079e-06","OSC-001 :  1.36098621416234e-07","THB-003 :  1.36098621416234e-07","THB-004 :  1.36098621416234e-07","THB-005 :  1.08878897132987e-06","THB-006 :  0.011760009679334","THB-007 :  4.08295864248702e-07","THB-008 :  1.36098621416234e-06","THB-010 :  2.17757794265975e-06","THB-009 :  2.85807104974092e-06","THB-011 :  2.72197242832468e-07","THB-014 :  4.08295864248702e-07","THB-015 :  1.49708483557857e-06","THB-016 :  1.08878897132987e-06","PRS-002 :  0.129370586066523","PRS-001 :  5.44394485664936e-06","PRS-003 :  0.152884889283091","FMP-001 :  5.44394485664936e-06","FMP-002 :  0.0117806966697892","FMP-003 :  0.164644898962425","STG-006 :  1.36098621416234e-07","SBO-005 :  4.76345174956819e-06","SBO-007 :  8.16591728497404e-07","SBO-008 :  1.36098621416234e-06","SBO-010 :  1.36098621416234e-06","SBO-009 :  9.52690349913639e-07","SBO-012 :  1.36098621416234e-07","SBI-018 :  3.67466277823832e-06","SBI-019 :  5.1717476138169e-06","SBI-017 :  2.72197242832468e-07","SBI-020 :  2.04147932124351e-06","SHR-001 :  1.36098621416234e-07","SBI-014 :  2.04147932124351e-06","SBI-013 :  3.94686002107079e-06","SBI-015 :  2.72197242832468e-07","SBI-011 :  0.011765589722812","SBI-012 :  5.85224072089807e-06","SBI-016 :  1.36098621416234e-07","SBI-010 :  5.03564899240066e-06","SBI-009 :  2.04147932124351e-06","SBI-008 :  2.31367656407598e-06","SBI-007 :  2.72197242832468e-07","OSC-003 :  1.63318345699481e-06","OSC-002 :  1.63318345699481e-06","MAU-001 :  1.41542566272883e-05","MAU-002 :  1.89177083768565e-05","MAU-003 :  0.105845122762998","MAU-011 :  0.0588068533277406","MAU-012 :  0.0705657742181032","RAR-005 :  4.5320840931606e-05","RAR-004 :  3.8379811239378e-05","RAR-003 :  3.56578388110533e-05","RAR-002 :  0.0353192254409697","RAR-001 :  3.8379811239378e-05","TSR-001 :  0.047044666070464","DRL-010 :  2.72197242832468e-07","DRL-011 :  2.72197242832468e-07","DRL-004 :  1.36098621416234e-07","DRF-004 :  1.36098621416234e-07","DRU-007 :  8.16591728497404e-07","DRU-008 :  8.16591728497404e-07","DRU-006 :  1.36098621416234e-07","DRU-005 :  6.8049310708117e-07","DRU-004 :  5.44394485664936e-07","DRU-001 :  8.16591728497404e-07","DRU-002 :  4.08295864248702e-07","SCL-004 :  1.63318345699481e-06","SCL-005 :  1.49708483557857e-06","SCL-001 :  2.72197242832468e-07","SCL-002 :  1.36098621416234e-07","SCM-003 :  1.36098621416234e-07","SCM-002 :  1.36098621416234e-07","SCM-001 :  1.36098621416234e-07"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"marker":{"colorbar":{"title":"residency_index","ticklen":2},"cmin":1.36098621416234e-07,"cmax":0.199902471727893,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["6.80825569085072e-07","rgba(68,1,84,1)"],["6.80825569085072e-07","rgba(68,1,84,1)"],["1.36165113817015e-06","rgba(68,1,84,1)"],["2.72330227634029e-06","rgba(68,1,84,1)"],["3.40412784542536e-06","rgba(68,1,84,1)"],["3.9998502183748e-06","rgba(68,1,84,1)"],["6.12743012176565e-06","rgba(68,1,84,1)"],["7.23377167152889e-06","rgba(68,1,84,1)"],["9.53155796719101e-06","rgba(68,1,84,1)"],["1.02123835362761e-05","rgba(68,1,84,1)"],["1.31058922048876e-05","rgba(68,1,84,1)"],["1.9063115934382e-05","rgba(68,1,84,1)"],["2.51905460561477e-05","rgba(68,1,84,1)"],["2.72330227634029e-05","rgba(68,1,84,1)"],["3.7445406299679e-05","rgba(68,1,84,1)"],["4.35728364214446e-05","rgba(68,1,84,1)"],["0.000184503729222055","rgba(68,1,84,1)"],["0.0588385626410585","rgba(71,24,103,1)"],["0.250047487583444","rgba(60,82,138,1)"],["0.661871895860921","rgba(52,182,122,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[8.16591728497404e-07,0.199902471727893,0.199902471727893,4.08295864248702e-07,6.8049310708117e-07,6.8049310708117e-07,5.44394485664936e-07,2.72197242832468e-06,2.72197242832468e-06,2.17757794265975e-06,2.17757794265975e-06,5.5800434780656e-06,5.5800434780656e-06,5.5800434780656e-06,7.62152279930911e-06,7.62152279930911e-06,8.84641039205521e-06,8.84641039205521e-06,7.62152279930911e-06,7.62152279930911e-06,3.94686002107079e-06,3.94686002107079e-06,1.36098621416234e-07,1.36098621416234e-07,1.36098621416234e-07,1.08878897132987e-06,0.011760009679334,4.08295864248702e-07,1.36098621416234e-06,2.17757794265975e-06,2.85807104974092e-06,2.72197242832468e-07,4.08295864248702e-07,1.49708483557857e-06,1.08878897132987e-06,0.129370586066523,5.44394485664936e-06,0.152884889283091,5.44394485664936e-06,0.0117806966697892,0.164644898962425,1.36098621416234e-07,4.76345174956819e-06,8.16591728497404e-07,1.36098621416234e-06,1.36098621416234e-06,9.52690349913639e-07,1.36098621416234e-07,3.67466277823832e-06,5.1717476138169e-06,2.72197242832468e-07,2.04147932124351e-06,1.36098621416234e-07,2.04147932124351e-06,3.94686002107079e-06,2.72197242832468e-07,0.011765589722812,5.85224072089807e-06,1.36098621416234e-07,5.03564899240066e-06,2.04147932124351e-06,2.31367656407598e-06,2.72197242832468e-07,1.63318345699481e-06,1.63318345699481e-06,1.41542566272883e-05,1.89177083768565e-05,0.105845122762998,0.0588068533277406,0.0705657742181032,4.5320840931606e-05,3.8379811239378e-05,3.56578388110533e-05,0.0353192254409697,3.8379811239378e-05,0.047044666070464,2.72197242832468e-07,2.72197242832468e-07,1.36098621416234e-07,1.36098621416234e-07,8.16591728497404e-07,8.16591728497404e-07,1.36098621416234e-07,6.8049310708117e-07,5.44394485664936e-07,8.16591728497404e-07,4.08295864248702e-07,1.63318345699481e-06,1.49708483557857e-06,2.72197242832468e-07,1.36098621416234e-07,1.36098621416234e-07,1.36098621416234e-07,1.36098621416234e-07],"size":[10.0003063715061,100,100,10.0001225486024,10.0002450972049,10.0002450972049,10.0001838229037,10.0011642117231,10.0011642117231,10.0009191145183,10.0009191145183,10.0024509720487,10.0024509720487,10.0024509720487,10.003370086567,10.003370086567,10.0039215552779,10.0039215552779,10.003370086567,10.003370086567,10.0017156804341,10.0017156804341,10,10,10,10.0004289201085,15.294528545314,10.0001225486024,10.000551468711,10.0009191145183,10.0012254860244,10.0000612743012,10.0001225486024,10.0006127430122,10.0004289201085,68.2451448626605,10.0023896977475,78.8317509812398,10.0023896977475,15.3038422390991,84.1263408008551,10,10.0020833262414,10.0003063715061,10.000551468711,10.000551468711,10.0003676458073,10,10.0015931318317,10.0022671491451,10.0000612743012,10.000857840217,10,10.000857840217,10.0017156804341,10.0000612743012,15.297040791664,10.0025735206511,10,10.0022058748438,10.000857840217,10.0009803888195,10.0000612743012,10.0006740173134,10.0006740173134,10.0063112530254,10.008455853568,57.6535142513812,36.475951538836,41.7700511640415,10.0203430680043,10.0172180786422,10.0159925926178,25.9013551832953,10.0172180786422,31.1803813304012,10.0000612743012,10.0000612743012,10,10,10.0003063715061,10.0003063715061,10,10.0002450972049,10.0001838229037,10.0003063715061,10.0001225486024,10.0006740173134,10.0006127430122,10.0000612743012,10,10,10,10],"sizemode":"area","line":{"colorbar":{"title":"","ticklen":2},"cmin":1.36098621416234e-07,"cmax":0.199902471727893,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["6.80825569085072e-07","rgba(68,1,84,1)"],["6.80825569085072e-07","rgba(68,1,84,1)"],["1.36165113817015e-06","rgba(68,1,84,1)"],["2.72330227634029e-06","rgba(68,1,84,1)"],["3.40412784542536e-06","rgba(68,1,84,1)"],["3.9998502183748e-06","rgba(68,1,84,1)"],["6.12743012176565e-06","rgba(68,1,84,1)"],["7.23377167152889e-06","rgba(68,1,84,1)"],["9.53155796719101e-06","rgba(68,1,84,1)"],["1.02123835362761e-05","rgba(68,1,84,1)"],["1.31058922048876e-05","rgba(68,1,84,1)"],["1.9063115934382e-05","rgba(68,1,84,1)"],["2.51905460561477e-05","rgba(68,1,84,1)"],["2.72330227634029e-05","rgba(68,1,84,1)"],["3.7445406299679e-05","rgba(68,1,84,1)"],["4.35728364214446e-05","rgba(68,1,84,1)"],["0.000184503729222055","rgba(68,1,84,1)"],["0.0588385626410585","rgba(71,24,103,1)"],["0.250047487583444","rgba(60,82,138,1)"],["0.661871895860921","rgba(52,182,122,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[8.16591728497404e-07,0.199902471727893,0.199902471727893,4.08295864248702e-07,6.8049310708117e-07,6.8049310708117e-07,5.44394485664936e-07,2.72197242832468e-06,2.72197242832468e-06,2.17757794265975e-06,2.17757794265975e-06,5.5800434780656e-06,5.5800434780656e-06,5.5800434780656e-06,7.62152279930911e-06,7.62152279930911e-06,8.84641039205521e-06,8.84641039205521e-06,7.62152279930911e-06,7.62152279930911e-06,3.94686002107079e-06,3.94686002107079e-06,1.36098621416234e-07,1.36098621416234e-07,1.36098621416234e-07,1.08878897132987e-06,0.011760009679334,4.08295864248702e-07,1.36098621416234e-06,2.17757794265975e-06,2.85807104974092e-06,2.72197242832468e-07,4.08295864248702e-07,1.49708483557857e-06,1.08878897132987e-06,0.129370586066523,5.44394485664936e-06,0.152884889283091,5.44394485664936e-06,0.0117806966697892,0.164644898962425,1.36098621416234e-07,4.76345174956819e-06,8.16591728497404e-07,1.36098621416234e-06,1.36098621416234e-06,9.52690349913639e-07,1.36098621416234e-07,3.67466277823832e-06,5.1717476138169e-06,2.72197242832468e-07,2.04147932124351e-06,1.36098621416234e-07,2.04147932124351e-06,3.94686002107079e-06,2.72197242832468e-07,0.011765589722812,5.85224072089807e-06,1.36098621416234e-07,5.03564899240066e-06,2.04147932124351e-06,2.31367656407598e-06,2.72197242832468e-07,1.63318345699481e-06,1.63318345699481e-06,1.41542566272883e-05,1.89177083768565e-05,0.105845122762998,0.0588068533277406,0.0705657742181032,4.5320840931606e-05,3.8379811239378e-05,3.56578388110533e-05,0.0353192254409697,3.8379811239378e-05,0.047044666070464,2.72197242832468e-07,2.72197242832468e-07,1.36098621416234e-07,1.36098621416234e-07,8.16591728497404e-07,8.16591728497404e-07,1.36098621416234e-07,6.8049310708117e-07,5.44394485664936e-07,8.16591728497404e-07,4.08295864248702e-07,1.63318345699481e-06,1.49708483557857e-06,2.72197242832468e-07,1.36098621416234e-07,1.36098621416234e-07,1.36098621416234e-07,1.36098621416234e-07]}},"textfont":{"size":[10.0003063715061,100,100,10.0001225486024,10.0002450972049,10.0002450972049,10.0001838229037,10.0011642117231,10.0011642117231,10.0009191145183,10.0009191145183,10.0024509720487,10.0024509720487,10.0024509720487,10.003370086567,10.003370086567,10.0039215552779,10.0039215552779,10.003370086567,10.003370086567,10.0017156804341,10.0017156804341,10,10,10,10.0004289201085,15.294528545314,10.0001225486024,10.000551468711,10.0009191145183,10.0012254860244,10.0000612743012,10.0001225486024,10.0006127430122,10.0004289201085,68.2451448626605,10.0023896977475,78.8317509812398,10.0023896977475,15.3038422390991,84.1263408008551,10,10.0020833262414,10.0003063715061,10.000551468711,10.000551468711,10.0003676458073,10,10.0015931318317,10.0022671491451,10.0000612743012,10.000857840217,10,10.000857840217,10.0017156804341,10.0000612743012,15.297040791664,10.0025735206511,10,10.0022058748438,10.000857840217,10.0009803888195,10.0000612743012,10.0006740173134,10.0006740173134,10.0063112530254,10.008455853568,57.6535142513812,36.475951538836,41.7700511640415,10.0203430680043,10.0172180786422,10.0159925926178,25.9013551832953,10.0172180786422,31.1803813304012,10.0000612743012,10.0000612743012,10,10,10.0003063715061,10.0003063715061,10,10.0002450972049,10.0001838229037,10.0003063715061,10.0001225486024,10.0006740173134,10.0006127430122,10.0000612743012,10,10,10,10]},"geo":"geo","frame":null},{"type":"scattergeo","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"colorbar":{"title":"residency_index","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"cmin":1.36098621416234e-07,"cmax":0.199902471727893,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["6.80825569085072e-07","rgba(68,1,84,1)"],["6.80825569085072e-07","rgba(68,1,84,1)"],["1.36165113817015e-06","rgba(68,1,84,1)"],["2.72330227634029e-06","rgba(68,1,84,1)"],["3.40412784542536e-06","rgba(68,1,84,1)"],["3.9998502183748e-06","rgba(68,1,84,1)"],["6.12743012176565e-06","rgba(68,1,84,1)"],["7.23377167152889e-06","rgba(68,1,84,1)"],["9.53155796719101e-06","rgba(68,1,84,1)"],["1.02123835362761e-05","rgba(68,1,84,1)"],["1.31058922048876e-05","rgba(68,1,84,1)"],["1.9063115934382e-05","rgba(68,1,84,1)"],["2.51905460561477e-05","rgba(68,1,84,1)"],["2.72330227634029e-05","rgba(68,1,84,1)"],["3.7445406299679e-05","rgba(68,1,84,1)"],["4.35728364214446e-05","rgba(68,1,84,1)"],["0.000184503729222055","rgba(68,1,84,1)"],["0.0588385626410585","rgba(71,24,103,1)"],["0.250047487583444","rgba(60,82,138,1)"],["0.661871895860921","rgba(52,182,122,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"color":[1.36098621416234e-07,0.199902471727893],"line":{"color":"rgba(255,127,14,1)"}},"lat":[-83.99264,-82.47034],"lon":[41.57098,45.50756],"geo":"geo","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>

</div>
<div id="aggregate-no-overlap-method" class="section level2">
<h2>Aggregate No Overlap Method</h2>
<p>The Aggregate No Overlap calculation method takes the length of time of each detection and sums them together. However, any overlap in time between one or more detections is excluded from the sum. For example, if the first detection is from <code>2016-01-01 01:02:43</code> to <code>2016-01-01 01:10:12</code> and the second detection is from <code>2016-01-01 01:09:01</code> to <code>2016-01-01 01:12:43</code>, then the sume of those two detections would be 10 minutes.A total is returned once all detections of been added without overlap. The sum for each station is then divided by the sum of the array to determine the residence index.</p>
<blockquote>
<p><span class="math inline">\(RI = \frac{AnOS}{AnOT}\)</span></p>
<p><span class="math inline">\(RI\)</span> = Residence Index</p>
<p><span class="math inline">\(AnOS\)</span> = Sum of length of time of each detection at the station, excluding any overlap</p>
<p><span class="math inline">\(AnOT\)</span> = Sum of length of time of each detection on the array, excluding any overlap</p>
</blockquote>
<pre class="r"><code>ri &lt;- glatos::residence_index(detection_events,calculation_method = &#39;aggregate_no_overlap&#39;)

geo &lt;- list(
  scope = &#39;north america&#39;,
  showland = TRUE,
  landcolor = toRGB(&quot;white&quot;),
  showocean = TRUE,
  oceancolor = toRGB(&quot;gray&quot;),
  showcountries = TRUE,
  showlakes = TRUE,
  lakecolor = plotly::toRGB(&quot;gray&quot;),
  
  resolution = 50,
  center = list(lat = median(ri$mean_latitude),
                lon = median(ri$mean_longitude)),
  lonaxis = list(range=c(min(ri$mean_longitude)-1, max(ri$mean_longitude)+1)),
  lataxis = list(range=c(min(ri$mean_latitude)-1, max(ri$mean_latitude)+1))
)


map &lt;- ri %&gt;% 
  plot_geo(lat = ~mean_latitude, lon = ~mean_longitude, color = ~residency_index )%&gt;%
  add_markers(
            text = ~paste(location, &#39;: &#39;, residency_index),
            hoverinfo = &quot;text&quot;,
    size = ~c(residency_index * 5)
  )%&gt;%
  layout(title = &quot;Aggregate No Overlap RI&quot;,geo = geo)
</code></pre>
<p>To show the map you can just type out the variable name.</p>
<pre class="r"><code>map</code></pre>
<div id="htmlwidget-01f5ae2a0f2e924595f7" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-01f5ae2a0f2e924595f7">{"x":{"visdat":{"73463627b9a":["function () ","plotlyVisDat"]},"cur_data":"73463627b9a","attrs":{"73463627b9a":{"lat":{},"lon":{},"color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"markers","text":{},"hoverinfo":"text","size":{},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"mapType":"geo","title":"Aggregate No Overlap RI","geo":{"domain":{"x":[0,1],"y":[0,1]},"scope":"north america","showland":true,"landcolor":"rgba(255,255,255,1)","showocean":true,"oceancolor":"rgba(190,190,190,1)","showcountries":true,"showlakes":true,"lakecolor":"rgba(190,190,190,1)","resolution":50,"center":{"lat":44.14295,"lon":-83.375645},"lonaxis":{"range":[-84.99264,-81.47034]},"lataxis":{"range":[40.57098,46.50756]}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"data":[{"lat":[43.39165,43.38709,43.387,43.60963,43.61235,43.61235,44.17255,44.17873,44.17873,44.17714,44.17712,44.24644,44.24643,44.24651,44.2418,44.24179,44.23708,44.23707,44.23235,44.23231,44.22292,44.22293,44.45198,44.90447,44.91327,44.92215,44.9308,44.93957,44.94818,44.96585,44.95714,44.97452,45.00077,45.0095,45.01824,45.33986,45.33385,45.34603,45.48983,45.49914,45.50756,44.71315,44.22771,44.21828,44.21342,44.2041,44.2088,44.19472,44.10408,44.09961,44.10875,44.09214,43.37698,44.12241,44.12695,44.11781,44.13613,44.13149,44.11329,44.14066,44.14524,44.14975,44.15439,44.45144,44.45157,41.57098,41.57417,41.57612,41.63532,41.6443,41.63288,41.63846,41.64165,41.63648,41.63719,41.62433,42.0769,42.09637,42.12746,42.24937,42.33541,42.33204,42.34447,42.35085,42.35469,42.35693,42.35278,42.55267,42.54992,42.61334,42.61462,42.6352,42.76994,42.77913],"lon":[-83.99264,-83.98737,-83.9873,-83.88658,-83.8608,-83.86096,-83.5309,-83.54767,-83.54779,-83.54169,-83.54173,-83.44582,-83.44582,-83.44588,-83.43513,-83.43507,-83.42447,-83.4245,-83.41382,-83.41389,-83.39236,-83.39233,-83.31861,-83.31385,-83.31073,-83.30769,-83.30461,-83.30165,-83.29828,-83.29228,-83.29516,-83.28925,-83.27969,-83.27665,-83.27346,-83.44852,-83.45837,-83.43862,-83.91048,-83.9059,-83.90137,-83.2011,-83.4031,-83.38175,-83.37122,-83.34985,-83.36047,-83.32868,-83.36923,-83.35869,-83.38007,-83.35204,-83.99115,-83.41245,-83.42327,-83.40174,-83.44487,-83.43403,-83.39079,-83.45551,-83.46626,-83.47694,-83.48782,-83.29315,-83.30572,-83.61776,-83.60687,-83.61071,-83.53083,-83.53426,-82.97516,-82.98027,-82.97328,-82.96842,-82.97453,-83.01284,-83.12096,-83.11681,-83.11873,-83.11824,-83.00901,-83.00352,-82.93849,-82.93774,-82.94291,-82.93016,-82.92844,-82.58909,-82.58493,-82.52119,-82.52926,-82.49834,-82.47034,-82.47231],"type":"scattergeo","mode":"markers","text":["TTB-002 :  0.000156906277687356","TTB-001 :  5.2199135687329e-05","TTB-001 :  5.2199135687329e-05","SGR-002 :  0.00126111876338085","SGR-001 :  0.00357579522989472","SGR-001 :  0.00357579522989472","SBI-003 :  0","SBI-001 :  0.00228548819241652","SBI-001 :  0.00228548819241652","SBI-002 :  1.29725662654901e-05","SBI-002 :  1.29725662654901e-05","SBO-001 :  0.000415430991121051","SBO-001 :  0.000415430991121051","SBO-001 :  0.000415430991121051","SBO-002 :  0.000283697669401253","SBO-002 :  0.000283697669401253","SBO-003 :  0.000938040089245078","SBO-003 :  0.000938040089245078","SBO-004 :  0.000284160975339306","SBO-004 :  0.000284160975339306","SBO-006 :  6.91870200826136e-05","SBO-006 :  6.91870200826136e-05","OSC-001 :  0","THB-003 :  0","THB-004 :  0","THB-005 :  0.000148566770802398","THB-006 :  0.00337580149996842","THB-007 :  0.000331881486958787","THB-008 :  0.00169585416858746","THB-010 :  0.000589942894454429","THB-009 :  0.000472263186188912","THB-011 :  0.0001416171817316","THB-014 :  9.57498938643314e-05","THB-015 :  0.00064677508952229","THB-016 :  0.00253104033958472","PRS-002 :  0.153689544559452","PRS-001 :  0.00244486543510682","PRS-003 :  0.162580076640068","FMP-001 :  0.00245382268324252","FMP-002 :  0.00631053574691017","FMP-003 :  0.183037504770121","STG-006 :  0","SBO-005 :  0.000116598661076726","SBO-007 :  0.000244779970604783","SBO-008 :  9.59043291770158e-05","SBO-010 :  2.59451325309801e-05","SBO-009 :  1.94588493982351e-05","SBO-012 :  0","SBI-018 :  0.000189492128663765","SBI-019 :  5.12725238112226e-05","SBI-017 :  0","SBI-020 :  2.22386850265544e-05","SHR-001 :  0","SBI-014 :  0.000313812555374712","SBI-013 :  0.00013389541609738","SBI-015 :  0","SBI-011 :  0.000240455781849619","SBI-012 :  0.000216209437758168","SBI-016 :  0","SBI-010 :  0","SBI-009 :  0","SBI-008 :  0","SBI-007 :  0","OSC-003 :  0.000291419435035473","OSC-002 :  3.62922984808353e-05","MAU-001 :  0.00702093818525844","MAU-002 :  0.000548245360029639","MAU-003 :  0.111594802510439","MAU-011 :  0.0479214319612837","MAU-012 :  0.10350779736172","RAR-005 :  0.003624596788703","RAR-004 :  0.00165647316385293","RAR-003 :  0.00507443550418419","RAR-002 :  0.0192075831444976","RAR-001 :  0.000407400354861461","TSR-001 :  0.0458864378460413","DRL-010 :  0.00213074400910674","DRL-011 :  0","DRL-004 :  0","DRF-004 :  0","DRU-007 :  0.000591487247581273","DRU-008 :  0.000566623162239083","DRU-006 :  0","DRU-005 :  0.000114591002011829","DRU-004 :  3.36668981652004e-05","DRU-001 :  3.10414978495655e-05","DRU-002 :  8.55571632271606e-05","SCL-004 :  0.000419291873938161","SCL-005 :  0.000164936913946945","SCL-001 :  0.000126019215150475","SCL-002 :  0","SCM-003 :  0","SCM-002 :  0","SCM-001 :  0"],"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"marker":{"colorbar":{"title":"residency_index","ticklen":2},"cmin":0,"cmax":0.183037504770121,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["7.97330419632047e-05","rgba(68,1,84,1)"],["0.0001713838534262","rgba(68,1,84,1)"],["0.000285182732101198","rgba(68,1,84,1)"],["0.000456250184567227","rgba(68,1,84,1)"],["0.000634278458157028","rgba(68,1,84,1)"],["0.000797435886618771","rgba(68,1,84,1)"],["0.00110824709649386","rgba(68,1,84,1)"],["0.0015499428368932","rgba(68,2,84,1)"],["0.00162271505773263","rgba(68,2,85,1)"],["0.00226964955429651","rgba(68,2,85,1)"],["0.00258014436321143","rgba(68,2,85,1)"],["0.00323045380335048","rgba(68,2,85,1)"],["0.00644867343624099","rgba(68,4,86,1)"],["0.0121694137301142","rgba(69,6,88,1)"],["0.0136170535898853","rgba(69,7,88,1)"],["0.01963584358824","rgba(69,10,90,1)"],["0.0550029319822309","rgba(71,23,102,1)"],["0.571023261798592","rgba(36,161,135,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0.000156906277687356,5.2199135687329e-05,5.2199135687329e-05,0.00126111876338085,0.00357579522989472,0.00357579522989472,0,0.00228548819241652,0.00228548819241652,1.29725662654901e-05,1.29725662654901e-05,0.000415430991121051,0.000415430991121051,0.000415430991121051,0.000283697669401253,0.000283697669401253,0.000938040089245078,0.000938040089245078,0.000284160975339306,0.000284160975339306,6.91870200826136e-05,6.91870200826136e-05,0,0,0,0.000148566770802398,0.00337580149996842,0.000331881486958787,0.00169585416858746,0.000589942894454429,0.000472263186188912,0.0001416171817316,9.57498938643314e-05,0.00064677508952229,0.00253104033958472,0.153689544559452,0.00244486543510682,0.162580076640068,0.00245382268324252,0.00631053574691017,0.183037504770121,0,0.000116598661076726,0.000244779970604783,9.59043291770158e-05,2.59451325309801e-05,1.94588493982351e-05,0,0.000189492128663765,5.12725238112226e-05,0,2.22386850265544e-05,0,0.000313812555374712,0.00013389541609738,0,0.000240455781849619,0.000216209437758168,0,0,0,0,0,0.000291419435035473,3.62922984808353e-05,0.00702093818525844,0.000548245360029639,0.111594802510439,0.0479214319612837,0.10350779736172,0.003624596788703,0.00165647316385293,0.00507443550418419,0.0192075831444976,0.000407400354861461,0.0458864378460413,0.00213074400910674,0,0,0,0.000591487247581273,0.000566623162239083,0,0.000114591002011829,3.36668981652004e-05,3.10414978495655e-05,8.55571632271606e-05,0.000419291873938161,0.000164936913946945,0.000126019215150475,0,0,0,0],"size":[10.0771512101282,10.0256664458891,10.0256664458891,10.6200952577824,11.7582274796343,11.7582274796343,10,11.1237802742985,11.1237802742985,10.0063786433571,10.0063786433571,10.2042684598867,10.2042684598867,10.2042684598867,10.1394948553204,10.1394948553204,10.4612366636995,10.4612366636995,10.1397226640117,10.1397226640117,10.0340194312376,10.0340194312376,10,10,10,10.0730506536844,11.659890061213,10.163186959218,10.8338557464742,10.2900764002852,10.232212992689,10.0696335233145,10.0470804628735,10.3180209330875,11.2445188807,85.569534384347,11.2021464641138,89.941031298383,11.2065507654794,13.1029062482862,100,10,10.0573318539831,10.1203589252492,10.047156399104,10.0127572867141,10.0095679650356,10,10.0931737547513,10.0252108285065,10,10.0109348171835,10,10.1543024202564,10.0658367117925,10,10.1182327107969,10.1063107226176,10,10,10,10,10,10.1432916668424,10.0178450141537,13.4522129083154,10.2695736180661,64.8714441805426,33.5630882421185,60.8950434734919,11.7822233284537,10.8144920077117,12.4951126598352,19.4444167886568,10.2003197759037,32.5624765335955,11.0476921713965,10,10,10,10.2908357625896,10.2786100294886,10,10.0563446829873,10.0165540982362,10.0152631823187,10.0420686716644,10.2061668656477,10.0810998941111,10.06196396404,10,10,10,10],"sizemode":"area","line":{"colorbar":{"title":"","ticklen":2},"cmin":0,"cmax":0.183037504770121,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["7.97330419632047e-05","rgba(68,1,84,1)"],["0.0001713838534262","rgba(68,1,84,1)"],["0.000285182732101198","rgba(68,1,84,1)"],["0.000456250184567227","rgba(68,1,84,1)"],["0.000634278458157028","rgba(68,1,84,1)"],["0.000797435886618771","rgba(68,1,84,1)"],["0.00110824709649386","rgba(68,1,84,1)"],["0.0015499428368932","rgba(68,2,84,1)"],["0.00162271505773263","rgba(68,2,85,1)"],["0.00226964955429651","rgba(68,2,85,1)"],["0.00258014436321143","rgba(68,2,85,1)"],["0.00323045380335048","rgba(68,2,85,1)"],["0.00644867343624099","rgba(68,4,86,1)"],["0.0121694137301142","rgba(69,6,88,1)"],["0.0136170535898853","rgba(69,7,88,1)"],["0.01963584358824","rgba(69,10,90,1)"],["0.0550029319822309","rgba(71,23,102,1)"],["0.571023261798592","rgba(36,161,135,1)"],["1","rgba(253,231,37,1)"]],"showscale":false,"color":[0.000156906277687356,5.2199135687329e-05,5.2199135687329e-05,0.00126111876338085,0.00357579522989472,0.00357579522989472,0,0.00228548819241652,0.00228548819241652,1.29725662654901e-05,1.29725662654901e-05,0.000415430991121051,0.000415430991121051,0.000415430991121051,0.000283697669401253,0.000283697669401253,0.000938040089245078,0.000938040089245078,0.000284160975339306,0.000284160975339306,6.91870200826136e-05,6.91870200826136e-05,0,0,0,0.000148566770802398,0.00337580149996842,0.000331881486958787,0.00169585416858746,0.000589942894454429,0.000472263186188912,0.0001416171817316,9.57498938643314e-05,0.00064677508952229,0.00253104033958472,0.153689544559452,0.00244486543510682,0.162580076640068,0.00245382268324252,0.00631053574691017,0.183037504770121,0,0.000116598661076726,0.000244779970604783,9.59043291770158e-05,2.59451325309801e-05,1.94588493982351e-05,0,0.000189492128663765,5.12725238112226e-05,0,2.22386850265544e-05,0,0.000313812555374712,0.00013389541609738,0,0.000240455781849619,0.000216209437758168,0,0,0,0,0,0.000291419435035473,3.62922984808353e-05,0.00702093818525844,0.000548245360029639,0.111594802510439,0.0479214319612837,0.10350779736172,0.003624596788703,0.00165647316385293,0.00507443550418419,0.0192075831444976,0.000407400354861461,0.0458864378460413,0.00213074400910674,0,0,0,0.000591487247581273,0.000566623162239083,0,0.000114591002011829,3.36668981652004e-05,3.10414978495655e-05,8.55571632271606e-05,0.000419291873938161,0.000164936913946945,0.000126019215150475,0,0,0,0]}},"textfont":{"size":[10.0771512101282,10.0256664458891,10.0256664458891,10.6200952577824,11.7582274796343,11.7582274796343,10,11.1237802742985,11.1237802742985,10.0063786433571,10.0063786433571,10.2042684598867,10.2042684598867,10.2042684598867,10.1394948553204,10.1394948553204,10.4612366636995,10.4612366636995,10.1397226640117,10.1397226640117,10.0340194312376,10.0340194312376,10,10,10,10.0730506536844,11.659890061213,10.163186959218,10.8338557464742,10.2900764002852,10.232212992689,10.0696335233145,10.0470804628735,10.3180209330875,11.2445188807,85.569534384347,11.2021464641138,89.941031298383,11.2065507654794,13.1029062482862,100,10,10.0573318539831,10.1203589252492,10.047156399104,10.0127572867141,10.0095679650356,10,10.0931737547513,10.0252108285065,10,10.0109348171835,10,10.1543024202564,10.0658367117925,10,10.1182327107969,10.1063107226176,10,10,10,10,10,10.1432916668424,10.0178450141537,13.4522129083154,10.2695736180661,64.8714441805426,33.5630882421185,60.8950434734919,11.7822233284537,10.8144920077117,12.4951126598352,19.4444167886568,10.2003197759037,32.5624765335955,11.0476921713965,10,10,10,10.2908357625896,10.2786100294886,10,10.0563446829873,10.0165540982362,10.0152631823187,10.0420686716644,10.2061668656477,10.0810998941111,10.06196396404,10,10,10,10]},"geo":"geo","frame":null},{"type":"scattergeo","mode":"markers","opacity":0,"hoverinfo":"none","showlegend":false,"marker":{"colorbar":{"title":"residency_index","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"cmin":0,"cmax":0.183037504770121,"colorscale":[["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["0","rgba(68,1,84,1)"],["7.97330419632047e-05","rgba(68,1,84,1)"],["0.0001713838534262","rgba(68,1,84,1)"],["0.000285182732101198","rgba(68,1,84,1)"],["0.000456250184567227","rgba(68,1,84,1)"],["0.000634278458157028","rgba(68,1,84,1)"],["0.000797435886618771","rgba(68,1,84,1)"],["0.00110824709649386","rgba(68,1,84,1)"],["0.0015499428368932","rgba(68,2,84,1)"],["0.00162271505773263","rgba(68,2,85,1)"],["0.00226964955429651","rgba(68,2,85,1)"],["0.00258014436321143","rgba(68,2,85,1)"],["0.00323045380335048","rgba(68,2,85,1)"],["0.00644867343624099","rgba(68,4,86,1)"],["0.0121694137301142","rgba(69,6,88,1)"],["0.0136170535898853","rgba(69,7,88,1)"],["0.01963584358824","rgba(69,10,90,1)"],["0.0550029319822309","rgba(71,23,102,1)"],["0.571023261798592","rgba(36,161,135,1)"],["1","rgba(253,231,37,1)"]],"showscale":true,"color":[0,0.183037504770121],"line":{"color":"rgba(255,127,14,1)"}},"lat":[-83.99264,-82.47034],"lon":[41.57098,45.50756],"geo":"geo","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
